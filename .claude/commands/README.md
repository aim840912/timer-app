# Claude Commands 使用指南

本目錄包含 10 個 Claude 指令，用於提升開發效率、程式碼品質和專案維護。

---

## 📑 快速導航

- [指令分類](#-指令分類)
- [決策樹：我應該用哪個指令？](#-決策樹我應該用哪個指令)
- [快速參考表](#-快速參考表)
- [開發流程中的使用時機](#-開發流程中的使用時機)
- [實際使用範例](#-實際使用範例)
- [指令詳細說明](#-指令詳細說明)

---

## 🗂️ 指令分類

### 1️⃣ 開發流程類（Development Workflow）

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/pre-dev-check` | 開發前檢查 | 實作任何功能**前** |

**目的**：確保開發品質、避免重複實作、遵循架構規範

---

### 2️⃣ 維護檢查類（Maintenance & Monitoring）

| 指令 | 用途 | 使用時機 | 執行頻率 |
|------|------|----------|----------|
| `/tech-debt-scan` | 技術債掃描 | 定期維護、感覺變慢時 | 每月一次 |
| `/major-change-check` | 重大變更檢查 | 大型重構後、批次更新依賴後 | 按需 |
| `/release-check` | 版本發布前檢查 | 版本發布**前**、重大功能上線前 | 每次發布前 |

**目的**：保持專案健康、及早發現問題、確保發布品質

---

### 3️⃣ 優化管理類（Optimization Management）

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/opt-status` | 查看優化歷史 | 提出優化建議**前** |
| `/opt-status pending` | 查看待評估項目 | 規劃優化工作時 |
| `/opt-status rejected` | 查看已拒絕項目 | 避免重複建議 |

**目的**：避免重複建議、了解優化狀態、掌握技術債

---

### 4️⃣ 程式碼審查類（Code Review）

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/safereview` | 安全的程式碼審查（唯讀） | 需要審查現有程式碼時 |

**目的**：程式碼品質審查、識別安全問題、提供改進建議

---

### 5️⃣ 規劃設計類（Planning & Design）

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/ultraplan` | 深度規劃（Plan Mode） | 複雜功能開發前、需要詳細計劃時 |
| `/deepdive` | 深度探索程式碼庫 | 不熟悉現有程式碼時、需要理解架構時 |
| `/archdesign` | 系統架構設計 | 設計新系統、架構調整時 |
| `/architecture-analysis` | 架構複雜度分析 | 評估架構是否過度工程化時 |

**目的**：深度分析、架構設計、制定計劃

---

## 🌲 決策樹：我應該用哪個指令？

```
開始：我想做什麼？
│
├─ 🚀 我要開始開發新功能
│   │
│   ├─ 還沒開始寫程式 → /pre-dev-check [功能名稱]
│   │   ├─ 需要深度規劃 → /ultraplan
│   │   └─ 不熟悉現有程式碼 → /deepdive [主題]
│   │
│   └─ 功能開發完成 → 程式碼審查
│
├─ 🔍 我要審查程式碼
│   └─ 審查現有程式碼 → /safereview [檔案或描述]
│
├─ 🛠️ 我剛完成重大變更
│   │
│   ├─ 大型重構、批次更新 → /major-change-check
│   │
│   └─ 版本發布前 → /release-check
│
├─ 📊 我要檢查專案健康度
│   │
│   ├─ 定期維護（每月） → /tech-debt-scan
│   │
│   └─ 感覺專案變慢、程式碼雜亂 → /tech-debt-scan
│
├─ 💡 我要提出優化建議
│   │
│   └─ 先查看優化歷史 → /opt-status
│       ├─ 看待評估項目 → /opt-status pending
│       └─ 看已拒絕項目 → /opt-status rejected
│
└─ 🏗️ 我要設計系統架構
    ├─ 架構設計 → /archdesign [系統描述]
    └─ 架構分析 → /architecture-analysis
```

---

## 📊 快速參考表

| 指令 | 類型 | 執行時間 | 優先級 | 何時使用 |
|------|------|----------|--------|----------|
| `/pre-dev-check` | 開發前 | ~2 分鐘 | ⭐⭐⭐⭐⭐ | 任何開發前（必須） |
| `/tech-debt-scan` | 維護 | ~5 分鐘 | ⭐⭐⭐⭐ | 每月一次 |
| `/major-change-check` | 維護 | ~3 分鐘 | ⭐⭐⭐⭐ | 重大變更後 |
| `/release-check` | 發布前 | ~10 分鐘 | ⭐⭐⭐⭐⭐ | 每次發布前（必須） |
| `/opt-status` | 查詢 | < 1 分鐘 | ⭐⭐⭐⭐ | 提出優化前 |
| `/safereview` | 審查 | ~3 分鐘 | ⭐⭐⭐ | 需要審查時 |
| `/ultraplan` | 規劃 | ~5 分鐘 | ⭐⭐⭐ | 複雜功能前 |
| `/deepdive` | 探索 | ~5 分鐘 | ⭐⭐⭐ | 不熟悉程式碼時 |
| `/archdesign` | 設計 | ~5 分鐘 | ⭐⭐⭐ | 架構設計時 |
| `/architecture-analysis` | 分析 | ~10 分鐘 | ⭐⭐⭐ | 架構評估時 |

---

## 🔄 開發流程中的使用時機

### 典型開發流程

```
1. 📋 規劃階段
   ├─ /ultraplan（複雜功能）
   ├─ /deepdive（探索現有程式碼）
   └─ /opt-status（查看相關優化）

2. 🚀 開發前檢查
   └─ /pre-dev-check [功能名稱]  ← 必須執行
       ├─ Code Reuse Check
       ├─ Dependency Assessment
       ├─ Architecture Consistency
       └─ Performance Impact

3. 💻 實作階段
   └─ 編寫程式碼

4. 🔍 程式碼審查
   └─ /safereview [檔案]

5. 🛠️ 重大變更後
   └─ /major-change-check
       ├─ 快取清理
       ├─ 依賴檢查
       ├─ 品質檢查
       └─ TODO 掃描

6. 📊 定期維護（每月）
   └─ /tech-debt-scan
       ├─ 建置時間分析
       ├─ TypeScript/ESLint 警告
       ├─ 重複程式碼
       ├─ 過時依賴
       └─ Bundle 大小

7. 🚢 版本發布前
   └─ /release-check  ← 發布前必須執行
       ├─ 依賴健康
       ├─ 程式碼品質
       ├─ 效能基準
       ├─ 測試套件
       ├─ 文檔更新
       └─ 環境配置
```

---

## 💼 實際使用範例

### 範例 1：開發新的計時器功能

```bash
# 步驟 1：開發前檢查
/pre-dev-check 環形進度條計時器

# 步驟 2：實作程式碼
# [編寫計時器組件...]

# 步驟 3：程式碼審查（可選）
/safereview src/components/features/timer/TimerProgressRing.tsx
```

### 範例 2：大型重構（遷移到新架構）

```bash
# 步驟 1：規劃階段
/ultraplan 重構狀態管理架構

# 步驟 2：探索現有程式碼
/deepdive 現有的狀態管理層

# 步驟 3：查看相關優化
/opt-status

# 步驟 4：實作重構
# [編寫程式碼...]

# 步驟 5：重構完成檢查
/major-change-check
```

### 範例 3：版本發布前的完整檢查

```bash
# 步驟 1：技術債掃描
/tech-debt-scan

# 步驟 2：處理發現的問題
# [修復 Critical 和 High 等級問題...]

# 步驟 3：發布前深度檢查
/release-check

# 步驟 4：確認所有檢查通過
# [檢視報告，確認可以發布...]

# 步驟 5：發布
# [部署到生產環境...]
```

### 範例 4：定期維護（每月一次）

```bash
# 執行技術債掃描
/tech-debt-scan

# 檢視報告並記錄問題
# [處理 Critical 和 Major 等級的技術債...]

# 如果有需要，執行重大變更檢查
/major-change-check
```

---

## 📚 指令詳細說明

### `/pre-dev-check [功能名稱]`

**用途**：開發前全面檢查，避免重複實作和技術債

**檢查項目**：
- ✅ Code Reuse Check - 搜尋相似功能
- ✅ Dependency Assessment - 評估依賴需求
- ✅ Architecture Consistency - 確認架構一致性
- ✅ Performance Impact - 評估效能影響

**何時使用**：
- 實作任何新功能前（必須）
- 新增任何依賴套件前
- 進行架構調整前

**範例**：
```bash
/pre-dev-check 多組鬧鐘管理功能
```

---

### `/tech-debt-scan`

**用途**：定期掃描技術債信號

**檢查項目**：
- 建置時間分析
- TypeScript/ESLint 警告
- 重複程式碼檢查
- 過時依賴掃描
- 程式碼複雜度分析
- Bundle 大小分析
- TODO/DEBT 標籤掃描
- 測試覆蓋率趨勢
- 未使用程式碼檢測

**何時使用**：
- 定期維護（建議每月一次）
- 感覺開發速度變慢時
- 建置時間明顯增加時

**範例**：
```bash
/tech-debt-scan
```

---

### `/major-change-check`

**用途**：重大變更後的維護檢查

**檢查項目**：
- ✅ 快取清理（< 200MB）
- ✅ 依賴檢查（未使用、安全漏洞、過時）
- ✅ 品質檢查（TypeScript、Lint、Bundle）
- ✅ TODO 掃描

**何時使用**：
- 完成大型重構後
- 批次更新依賴後
- 新增多個功能後
- 架構調整後

**範例**：
```bash
/major-change-check
```

---

### `/release-check`

**用途**：版本發布前的深度檢查（最全面）

**檢查項目**（9 大類）：
1. 依賴健康度
2. 程式碼品質
3. 效能基準
4. 資料庫效能（如適用）
5. 測試套件
6. 系統指標
7. 文檔更新
8. 環境配置
9. 備份回滾

**何時使用**：
- 版本發布前（必須）
- 重大功能上線前
- 生產環境部署前

**範例**：
```bash
/release-check
```

**⚠️ 注意**：此指令執行時間較長（~10 分鐘），建議預留足夠時間。

---

### `/opt-status [參數]`

**用途**：查詢優化歷史和狀態

**參數**：
- 無參數：顯示完整優化歷史
- `pending`：僅顯示待評估項目
- `rejected`：僅顯示已拒絕項目

**何時使用**：
- 提出任何優化建議前（必須）
- 規劃新功能前（了解效能狀態）
- 定期檢視專案技術債狀態

**範例**：
```bash
/opt-status
/opt-status pending
/opt-status rejected
```

---

### `/safereview [檔案或描述]`

**用途**：安全的程式碼審查（唯讀模式）

**檢查項目**：
- 程式碼品質
- 架構一致性
- 安全性
- 效能
- 測試

**何時使用**：
- 需要審查現有程式碼時
- 不確定程式碼品質時
- 學習程式碼庫時

**範例**：
```bash
/safereview src/hooks/useTimer.ts
```

---

### `/ultraplan [功能描述]`

**用途**：使用深度思考進行規劃（Plan Mode）

**何時使用**：
- 複雜功能開發前
- 需要詳細計劃時
- 不確定實作方向時

**範例**：
```bash
/ultraplan 實作多組計時器並行功能
```

---

### `/deepdive [主題]`

**用途**：深度探索程式碼庫和系統架構

**探索目標**：
- 程式碼搜尋
- 架構理解
- 模式識別
- 問題分析

**何時使用**：
- 不熟悉現有程式碼時
- 需要理解架構時
- 查找特定功能實作時

**範例**：
```bash
/deepdive LocalStorage 資料持久化
/deepdive Framer Motion 動畫實作
```

---

### `/archdesign [系統描述]`

**用途**：系統架構設計（使用 ultrathink）

**何時使用**：
- 設計新系統時
- 架構調整時
- 需要架構建議時

**範例**：
```bash
/archdesign 設計計時器狀態管理架構
```

---

### `/architecture-analysis`

**用途**：深度分析專案架構複雜度，評估是否過度工程化

**分析項目**：
- 目錄結構複雜度
- 抽象層級分析
- 設計模式使用
- 依賴關係
- 程式碼重複度
- 架構一致性

**何時使用**：
- 感覺架構過於複雜時
- 定期架構健康檢查
- 準備重構前

**範例**：
```bash
/architecture-analysis
```

---

## 🎯 最佳實踐

### ✅ 必須執行的指令

在開發流程中，以下指令是**必須**執行的：

1. **開發前** → `/pre-dev-check` - 避免重複實作、技術債
2. **版本發布前** → `/release-check` - 確保發布品質

### 📅 建議定期執行

- **每月一次** → `/tech-debt-scan` - 技術債掃描
- **重大變更後** → `/major-change-check` - 維護檢查
- **提出優化前** → `/opt-status` - 查看優化歷史

### 🚫 避免的錯誤

- ❌ 不執行 `/pre-dev-check` 就開始開發（可能重複造輪子）
- ❌ 版本發布前不執行 `/release-check`（可能影響生產環境）
- ❌ 提出優化建議前不查看 `/opt-status`（可能重複建議）

---

## 📝 總結

### 核心工作流程

```
規劃 → 開發前檢查 → 實作 → 審查 → 維護 → 發布前檢查 → 發布
  ↓         ↓          ↓      ↓      ↓          ↓         ↓
ultraplan  pre-dev   coding  review  major   release    deploy
deepdive   check           safereview check   check
```

### 記住這 2 個關鍵指令

1. **`/pre-dev-check`** - 開發前必做
2. **`/release-check`** - 發布前必做

有了這些指令，您可以：
- ✅ 保持程式碼品質
- ✅ 避免重複實作
- ✅ 及早發現問題
- ✅ 確保發布安全
- ✅ 持續改進專案

---

**需要幫助？**

如果不確定該使用哪個指令，請參考上面的[決策樹](#-決策樹我應該用哪個指令)！
