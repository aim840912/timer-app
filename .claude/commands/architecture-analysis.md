---
description: 深度分析專案架構複雜度，評估是否過度工程化，並提供簡化建議
tags:
  - architecture
  - analysis
  - complexity
---

# 專案架構複雜度深度分析

執行專案架構的全面複雜度分析，評估是否符合 Next.js 最佳實踐，識別過度工程化問題。

## 分析範圍

### 1. 複雜度指標統計
- 專案規模（檔案數、程式碼行數、目錄深度）
- 依賴統計（npm 套件、自定義服務、中間件）
- 架構層級分布
- 程式碼組織指標

### 2. 架構模式評估
分析使用的設計模式是否必要：
- Factory Pattern
- Abstract Service Layer
- CQRS Pattern
- Repository Pattern
- Middleware Composition
- Pooled Service Pattern

評估每個模式的：
- 使用位置
- 實際使用率
- 是否必要
- 投資報酬率

### 3. 與 Next.js 最佳實踐對比
對比以下面向：
- App Router 使用方式
- API Routes 組織
- Server/Client Components 比例
- 服務層設計
- 目錄結構深度
- 中間件使用
- 類型安全
- 測試覆蓋

### 4. 具體問題識別
按嚴重程度分類：
- 🔴 嚴重問題（過度抽象、複雜工廠、CQRS 濫用）
- 🟡 中度問題（目錄過深、多版本服務、巨大元件）
- 🟢 輕度問題（缺乏測試、Client Components 過多）

### 5. 簡化建議
提供分階段的簡化方案：
- **階段一（P0）**: 移除未充分使用的抽象層
  - 移除抽象服務層（使用率 < 15%）
  - 簡化 Service Factory
  - 預期減少 ~1,600 行，降低複雜度 45%

- **階段二（P1）**: 合併過度拆分的服務
  - 合併 CQRS 拆分
  - 移除多版本服務
  - 預期減少 ~800 行，降低複雜度 20%

- **階段三（P2）**: 目錄結構優化
  - 扁平化過深目錄（11 層 → 7 層）
  - 提升可維護性 20%

### 6. 與典型專案對比
對比同規模的：
- 簡單電商專案
- 中型 SaaS 應用
- 大型企業應用

評估本專案是否匹配其規模的架構複雜度。

## 執行方式

```bash
/architecture-analysis
```

## 輸出格式

生成包含以下部分的完整報告：

```
Part 1: 複雜度指標摘要
Part 2: 架構模式評估
Part 3: 與最佳實踐對比
Part 4: 具體問題識別
Part 5: 簡化建議
Part 6: 與典型專案對比
Part 7: 總結與優先級
```

## 使用時機

- 專案架構演進評估
- 技術債務審查
- 新團隊成員入職培訓
- 重構規劃前的評估
- 定期架構健康檢查（建議每季度）

## 相關指令

- `/simplify-architecture` - 執行架構簡化
- `/architecture-report` - 快速查看最新報告
- `/tech-debt-scan` - 技術債掃描

## 注意事項

⚠️ 此分析會：
- 深度檢查所有服務和抽象層
- 統計檔案數量和程式碼行數
- 分析設計模式使用情況
- 可能需要 2-3 分鐘執行時間

✅ 此分析**不會**：
- 修改任何程式碼
- 變更專案配置
- 執行任何建置或測試

---

**目標**: 提供數據驅動的架構評估，幫助團隊做出明智的重構決策。
